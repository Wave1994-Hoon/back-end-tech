# GC 튜닝
## Default GC
- java8: parallel GC
- 그 외 상위 버전 G1GC

## GC 튜닝이 필요한 케이스
- 메모리 크기도 지정하지 않고 Timeout 로그가 수도 없이 출력된다면 여러분의 시스템에서 GC 튜닝을 하는 것이 좋다.
- 다만, GC 튜닝은 가장 마지막에 하는 작업이다.

## GC 튜닝을 하는 이유
- Java 에서 생성된 객체는 GC 가 처리해서 지운다.
- 즉, 객체가 많이 생성될 수록 GC 가 처리해야 하는 대상도 많아지고, GC 를 수행하는 횟수도 증가
- 따라서 GC 수행 횟수를 줄이려면 객체 생성을 줄이는 작업이 우선되어야 한다.
- 예를들어 String 대신 StringBuilder 혹은 StringBuffer 를 사용하는 방법이 있다.


## GC 튜닝의 목적
- (1) Old 영역으로 넘어가는 객체의 수를 최소화
- (2) Full GC 의 실행 시간을 줄이는 것

## GC 튜닝할 때 주로 사용하는 옵션
- -Xms 옵션, -Xmx 옵션, -XX:NewRatio 옵션


## 메모리 크기 지정
- (1) 메모리 크기가 크면
    - GC 발생 횟수는 줄어든다.
    - GC 수행 시간은 길어진다.
- (2) 메모리 크기가 작으면
    - GC 수행시간은 적어진다.
    - GC 발생 횟수는 증가한다.
    
## 어떻게 메모리 설정을 할까?
- Full GC 후에 남아 있는 메모리가 300MB 정도라면 300MB(기본 사용) + 500MB(Old 영역용 최소) + 200 MB(여유 메모리)를 감안하여 1GB 정도로 지정하는 것이 좋다
- 즉, Old 영역을 위해서 500MB 이상 여유가 있는 공간을 지정해야 한다는 말이다.


## NewRatio
- New 영역과 Old 영역의 비율
- New 영역의 크기가 작으면 Old 영역으로 넘어가는 메모리의 양이 많아져서 Full GC도 잦아지고 시간도 오래 걸린다.


## 출처
https://d2.naver.com/helloworld/37111
<br>
https://www.youtube.com/watch?v=Fe3TVCEJhzo