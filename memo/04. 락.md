# 락
## 1. 정의
- 데이터의 일관성을 지키기 위해서, Lock 을 걸고 이를 관리하느 것을 Locking 이라고 한다.

## 2. 낙관적 락 (Optimistic Lock)
- 기본적으로 데이터 갱신시 충돌이 발생하지 않을 것이라고 보는 것
- 데이터 갱신시 충돌이 발생하지 않을 것이라고 예상하기 때문에, 우선적으로 락을 걸지 않는다.
- 단점
    - 충돌이 발생하면 오버헤드가 발생한다.
- JPA
    - @Version 사용
    - 버전이 다르면 롤백

## 3. 비관적 락 (Pessimistic Lock)
- 기본적으로 데이터 갱신시 충돌이 발생할 것이라고 비관적으로 보고 미리 잠금을 거는 것
- 데이터 갱신시 충돌이 발생할 것이라고 예상하기 때문에, 우선적으로 락을 건다 (조회할 때 부터 건다.)
- 단점
    - 충돌이 없으면 오버헤드가 발생한다.
- 특징
    - (1) 가져올 때 DB 에 락을 건다.
    - (2) 데이터베이스 락
    - (3) 무결성의 장점
    - (4) 데드락의 위험성
 
- 종류
    - Shared Lock
        - 다른 사용자가 동시에 읽을 수는 있지만, Update Delete 를 방지함
        - JPA: PESSIMISTIC.READ 
    - Exclusive Lock
        - 다른 사용자가 읽기, 수정, 삭제 모두를 불가능하게 함 
        - JPA: PESSIMISTIC.WRITE
  