# #살아있다 #자프링외길12년차 #코프링2개월생존기
## 영상 링크
https://www.youtube.com/watch?v=RBQOlv0aRl4&ab_channel=%EB%8B%B9%EA%B7%BC%EB%A7%88%EC%BC%93%ED%8C%80

## 1. 간결성
#### 언어가 간결하다는 건 그 언어로 작성된 코드로 읽을 때 의도를 쉽게 파악할 수 있다는 의미다.

```kotlin
data class Person {
  val id: UUID,
  val firstname: String,
  val lastname: String,

}
```

데이터 보관을 목적으로 사용하는 클래스가 필요할 때는 class 앞에 data를 붙여 정의한다.

프로퍼티에 대한 getter(), setter(), equals(), hashCode(), toString(), copy(), componentN() 메서드를 컴파일 시점에 자동으로 생성한다. DTO 에 사용하기 좋을 것 같다.

#### 표준 라이브러리의 풍부한 API와 고차 함수의 도움을 받아 간결하게 목적을 달성할 수 있다.
```kotlin
val persons = repository.findByLastname("Kim")
val filteredPersons = persons.filter { it.address.city == "Seoul" }
```

#### 단일표현 함수는 등호(=)로 함수 정의와 바디를 구분하여 짧게 표현할 수 있다.
```kotlin
fun double(x: Int): Int = x * 2
val beDoubled = double(2)
```

<br>

## 2. 안정성
#### null이 될 수 없는 값을 추적하며, NullPointException 발생을 방지한다.
```kotlin
val nullable: String? = null // 널이 될 수 있음
val nonNullable: String = "" // 널이 될 수 없음
```

#### 타입 검사와 캐스트가 한 연산자에 의해 이뤄지며 ClassCastException 발생을 방지한다.
```kotlin
val value = loadValue()
if (value is String) {
	// 문자열 타입이 제공하는 메서드를 사용할 수 있음
	value.uppercase(Locale.getDefault())
}
```

#### break 문이 없어도 되며, 열거형 같은 특별한 타입과 함께 쓰면 모든 값이 평가되었는지 확인한다.
```kotlin
val scopeRange = when(CreditScore.EXCELLENT) {
    CreditScore.BAD -> 300..629
    CreditScore.FAIR -> 630..689
    CreditScore.GOOD -> 690..719
    CreditScore.EXCELLENT -> 720..850
}

enum class CreditScore {
    BAD, FAIR, GOOD, EXCELLENT
}
```

<br>

## 3. 그만 널 잊으라고 (null을 안전하게 다루는 방법)
#### 자바스러운 코드
```kotlin
fun from(posts: Array<Post?>): Array<PostDto> { 
    return posts.map({ post -> 
        if (post == null) {
            throw Error("Post Object is null")
        }
        if (post.id == null) {
            throw Error("Id field is null in post object")
        }
        PostDto(
                post.id,
                post.text,
                post.author.id,
                post.createdAt,
                post.updatedAt
        )
    }).toTypedArray()
}
}
```

#### 안전한 호출 연산자 : ?.
```kotlin
fun from(posts: Array<Post?>): Array<PostDto> {
    return posts.map({ post ->
        if (post?.id == null) { // post 객체가 null 이 아니면 id 를 꺼낸다 
            throw Error("Id field is null in post object")
        }
        PostDto(
                post.id,
                post.text,
                post.author.id,
                post.createdAt,
                post.updatedAt
        )
    }).toTypedArray()
}
```

#### 엘비스 연산자: ?:
```kotlin
fun from(posts: Array<Post?>): Array<PostDto> {
    return posts.map({ post ->
        PostDto(
                post?.id ?: throw Error("Id field is null in post object"), // 엘비스 연산자 사용
                post.text,
                post.author.id,
                post.createdAt,
                post.updatedAt
        )
    }).toTypedArray()
}
```

#### 널 아님을 단언 : !!
```kotlin
fun from(posts: Array<Post?>): Array<PostDto> {
    return posts.map({ post ->
        PostDto(
                post?.id!!, // null 아님 !!
                post.text, 
                post.author.id,
                post.createdAt,
                post.updatedAt
        )
    }).toTypedArray()
}
```

## 4. 다 놀았니? 이제 할 일을 하자
#### 문(statement)과 식(expression)
```kotlin
fun mapItem(item: NewsItem<*>): NewsItemDto {
    if (item is NewsItem.NewTopic) {
        return NewsItemDto(item.content.title, item.content.author)
    } else if (item is NewItem.NewPost) {
        return NewsItemDto(item.content.text, item.content.author)
    } else {
        throw IllegalArgumentException("This item cannot be converted")
    }
}
```

- statement : 아무런 값을 만들어내지 않음
- expression : 값을 만들어낼 수 있는 것. 다른 식의 하위 요소로 계산에 참여할 수도 있음

자바에서는 모든 제어 구조가 문(statement), 코틀린에서는 루프를 제외한 모든 제어 구조가 식(expression)

```kotlin
fun mapItem(item: NewsItem<*>): NewsItemDto {
    return if (item is NewsItem.NewTopic) {
        NewsItemDto(item.content.title, item.content.author)
    } else if (item is NewItem.NewPost) {
        NewsItemDto(item.content.text, item.content.author)
    } else {
        throw IllegalArgumentException("This item cannot be converted")
    }
}

```

#### 봉인해서 까먹지 않기
```kotlin
fun mapItem(item: NewsItem<*>) = when (item) {
    is NewsItem.NewTopic -> NewsItemDto(item.content.title, item.content.author)
    is NewItem.NewPost -> NewsItemDto(item.content.text, item.content.author)
    else -> throw IllegalArgumentException("This item cannot be converted")
}
```

